import { Meta } from '@storybook/blocks';

<Meta title="Introduction/Component Guide" />

# Component Development Guide

## Quick Reference

This is a quick reference guide for developing components with Storybook. For detailed information, see [COMPONENT_GUIDE.md](https://github.com/your-org/nexus-eppm/blob/main/.storybook/COMPONENT_GUIDE.md).

## Story Template

```typescript
import type { Meta, StoryObj } from '@storybook/react';
import { YourComponent } from './YourComponent';

const meta = {
  title: 'Category/YourComponent',
  component: YourComponent,
  parameters: {
    layout: 'centered',
    docs: {
      description: {
        component: 'Component description',
      },
    },
  },
  tags: ['autodocs'],
  argTypes: {
    // Define controls
  },
} satisfies Meta<typeof YourComponent>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Default: Story = {
  args: {
    // Default props
  },
};
```

## Component Categories

| Category | Purpose | Examples |
|----------|---------|----------|
| **UI** | Basic reusable components | Button, Input, Card, Modal |
| **Shared** | App-specific shared components | StatCard, Charts |
| **Domain** | Business domain components | ProjectCard, TaskItem |
| **Patterns** | Composite patterns | Forms, Tables, Dashboards |

## Story Naming

- `Default` - Basic/default variant
- `Primary`, `Secondary` - Variant names
- `WithIcon`, `WithLabel` - Feature-based names
- `Loading`, `Disabled` - State names
- `LoginForm`, `ContactForm` - Example names
- `AllVariants`, `AllSizes` - Comparison stories

## Args vs Render

### Use Args (Preferred)
```typescript
export const Default: Story = {
  args: {
    variant: 'primary',
    children: 'Button',
  },
};
```

### Use Render (Complex scenarios)
```typescript
export const Complex: Story = {
  render: () => (
    <div>
      <Component />
      <Component />
    </div>
  ),
};
```

## Documentation

### Component Documentation
```typescript
/**
 * ## Component Name
 * 
 * Brief description.
 * 
 * ### Usage Guidelines
 * - When to use
 * - Best practices
 * 
 * ### Accessibility
 * - A11y considerations
 */
```

### Story Documentation
```typescript
/**
 * Description of this specific variant
 */
export const StoryName: Story = {
  // ...
};
```

## Common ArgTypes

```typescript
argTypes: {
  // Text control
  label: {
    control: 'text',
    description: 'Button label',
  },
  
  // Select control
  variant: {
    control: 'select',
    options: ['primary', 'secondary', 'outline'],
    description: 'Visual variant',
  },
  
  // Boolean control
  disabled: {
    control: 'boolean',
    description: 'Disable button',
  },
  
  // Number control
  size: {
    control: { type: 'number', min: 0, max: 100 },
    description: 'Size value',
  },
  
  // Action logger
  onClick: {
    action: 'clicked',
  },
  
  // Hide control
  icon: {
    control: false,
    description: 'Icon component',
  },
}
```

## Decorators

### Story-level Decorator
```typescript
export const Story: Story = {
  decorators: [
    (Story) => (
      <div style={{ width: '400px' }}>
        <Story />
      </div>
    ),
  ],
};
```

### Component-level Decorator
```typescript
const meta = {
  // ...
  decorators: [
    (Story) => (
      <div className="p-4">
        <Story />
      </div>
    ),
  ],
} satisfies Meta<typeof Component>;
```

## Parameters

```typescript
parameters: {
  layout: 'centered' | 'fullscreen' | 'padded',
  
  backgrounds: {
    default: 'light',
    values: [
      { name: 'light', value: '#ffffff' },
      { name: 'dark', value: '#000000' },
    ],
  },
  
  viewport: {
    defaultViewport: 'mobile',
  },
  
  docs: {
    description: {
      component: 'Component description',
      story: 'Story description',
    },
  },
}
```

## Accessibility

Always test components with the a11y addon:

1. Check the **Accessibility** tab
2. Fix any violations
3. Test keyboard navigation
4. Verify screen reader support
5. Check color contrast

## Testing with Vitest

```typescript
import { test, expect } from 'vitest';
import { composeStories } from '@storybook/react';
import * as stories from './Component.stories';

const { Default } = composeStories(stories);

test('renders component', () => {
  const { container } = render(<Default />);
  expect(container.firstChild).toBeInTheDocument();
});
```

## Play Functions

```typescript
import { userEvent, within } from '@storybook/test';

export const Interactive: Story = {
  play: async ({ canvasElement }) => {
    const canvas = within(canvasElement);
    await userEvent.click(canvas.getByRole('button'));
  },
};
```

## Checklist

When creating a new component story:

- [ ] Create component with TypeScript types
- [ ] Add comprehensive prop documentation
- [ ] Create `.stories.tsx` file
- [ ] Include component description
- [ ] Add usage guidelines
- [ ] Document accessibility features
- [ ] Create Default story
- [ ] Add variant stories
- [ ] Add state stories (loading, error, etc.)
- [ ] Add real-world example stories
- [ ] Test with a11y addon
- [ ] Test keyboard navigation
- [ ] Review in different viewports
- [ ] Verify responsive behavior

## Best Practices

### ✅ Do
- Use TypeScript for all components
- Document all props clearly
- Provide sensible defaults
- Test all variants and states
- Include real-world examples
- Check accessibility
- Use semantic HTML
- Follow naming conventions

### ❌ Don't
- Hard-code values that should be props
- Skip prop documentation
- Ignore accessibility issues
- Create overly complex components
- Use inline styles unnecessarily
- Forget edge cases
- Skip error states

## Resources

- [Storybook Docs](https://storybook.js.org/docs/react/get-started/introduction)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [WCAG Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [React Best Practices](https://react.dev/learn)

## Getting Help

1. Search existing stories for examples
2. Check the [Component Guide](/.storybook/COMPONENT_GUIDE.md)
3. Review Storybook documentation
4. Ask the frontend team
